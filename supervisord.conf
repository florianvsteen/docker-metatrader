[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=warn

[program:dbus-system]
command=dbus-daemon --system --nofork --nopidfile
priority=5
autorestart=true
stdout_logfile=/dev/null
stderr_logfile=/dev/null

[program:dbus-session]
command=dbus-daemon --session --nofork --nopidfile --address=unix:path=/run/user/1000/bus
user=trader
environment=HOME="/home/trader",USER="trader",DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/1000/bus"
priority=6
autorestart=true
stdout_logfile=/dev/null
stderr_logfile=/dev/null

[program:xvfb]
command=Xvfb :99 -screen 0 1280x800x24 -nolisten tcp
priority=10
autorestart=true
stdout_logfile=/dev/null
stderr_logfile=/dev/null

[program:fluxbox]
command=fluxbox
environment=DISPLAY=":99",HOME="/home/trader",USER="trader",DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/1000/bus"
user=trader
priority=20
startsecs=2
autorestart=true
stdout_logfile=/dev/null
stderr_logfile=/dev/null

[program:x11vnc]
command=x11vnc -display :99 -rfbauth /etc/vnc/passwd -rfbport %(ENV_VNC_PORT)s -forever -shared -noxdamage -noxfixes -viewonly
priority=30
startsecs=3
autorestart=true
stdout_logfile=/dev/null
stderr_logfile=/dev/null

[program:novnc]
command=novnc --vnc localhost:%(ENV_VNC_PORT)s --listen %(ENV_NOVNC_PORT)s
priority=40
startsecs=4
autorestart=true
stdout_logfile=/dev/null
stderr_logfile=/dev/null

[program:mt5]
command=/home/trader/scripts/mt5-start.sh
environment=DISPLAY=":99",HOME="/home/trader",USER="trader",XDG_DATA_HOME="/home/trader/.local/share",DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/1000/bus"
user=trader
priority=50
startsecs=10
autorestart=true
stdout_logfile=/proc/1/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/proc/1/fd/2
stderr_logfile_maxbytes=0
